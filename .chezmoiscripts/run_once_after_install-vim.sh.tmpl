{{- if eq .chezmoi.os "linux" -}}
#!/bin/bash
set -euo pipefail

if [ ! -d "$HOME/.vim" ]; then
    echo "Cloning vimfiles..."
    git clone https://github.com/stricklin/vimfiles.git "$HOME/.vim"
else
    echo "Updating vimfiles..."
    cd "$HOME/.vim"
    git pull
fi

echo "Updating vim-plug..."
curl -fsSL https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim > "$HOME/.vim/autoload/plug.vim"

echo "Installing vim plugins..."
vim +PlugInstall +qall

if [ ! -L "$HOME/.vimrc" ]; then
    echo "Creating .vimrc symlink..."
    ln -sfn "$HOME/.vim/vimrc" "$HOME/.vimrc"
fi
{{- end }}
